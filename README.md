<img src="https://img.shields.io/github/stars/s-iwakawa/roulette?style=plastic">

## kintone jsカスタマイズ **ルーレット編**
### プロジェクトの概要
本プロジェクトは、「日々の業務を楽しく、公平な割り振りを」をコンセプトとしたkintone jsカスタマイズ企画です。

開発背景：所属チームには、業務のタスク振り分けをルーレットで決める文化があり、「このタスクが来るかもしれない……来るのか、来ないのか、どっちなんだい…」とハラハラドキドキを楽しむ、タスクギャンブラー達が集結しています。しかし、現在はインターネット上に既に公開されている[webルーレット](https://jp.piliapp.com/random/wheel/)に毎回アクセスして、kintone上の議事録へと入力し直しています。これをkintone上で作ってしまおう！という熱いギャンブル精神からこのプロジェクトは発足しました。

※現在開発中のルーレットデモ動画

[![Image from Gyazo](https://i.gyazo.com/5957bb5cfa82e310d35671ddb20fedae.gif)](https://gyazo.com/5957bb5cfa82e310d35671ddb20fedae)

これであなたのチームにも「楽しさ」を。

## 目次
- インストレーション
- 使用言語、環境、テクノロジー
- 使い方
- こだわりポイント
- 今後の計画

### 必要条件

### 使用言語、環境、テクノロジー
- 言語
  - js
  - css
- 環境
  - kintone

### 使い方
1. レコード新規作成
2. テーブルにルーレットに追加する名前を入力
3. startボタンをクリック

### こだわりポイント
- **割合変化ボタン**
  - オンにすると、ルーレットの割合をランダムで変化させる
  - 360°を100%, N = 人数, (-0.5 <= σ <= 0.5) と仮定した際に、ルーレットを (100 / N) * N の等分　もしくは、 {(100 / N) * σ} * N で分割する
  - [N-1]番目まで (-0.5 <= σ <= 0.5) の範囲で乱数を発生させ、(100 / N) * σ で割合を決定する
  - N番目では、N番目までの割合の合計値を算出し、-0.5 * (100 / N) <= 100 - SUM(1 ~ (N-1)) <= 0.5 * (100 / N) に収まれば N番目の割合は　100 - SUM(1 ~ (N-1))　それ以外だった場合は、範囲に収まるまで繰り返し1番目から計算を繰り返す
  
  [![Image from Gyazo](https://i.gyazo.com/d672d62d3b6521b6df1fb2e85fcbde44.gif)](https://gyazo.com/d672d62d3b6521b6df1fb2e85fcbde44)

- **筋肉ルーレット式**
  - オンにすると、なかやまきんに君の筋肉ルーレットのように、一度止まるが再度ルーレットが動き始める
  - ルーレットの回転角 revolution [deg] とし、3600 ~ 6120 deg の範囲でランダムな回転角が発生させる
  - 回転アニメーションに設定する回転を　{ 0 -> revolution / 2 } までと { revolution / 2 -> revolution} の2回に分けて繰り返すことで筋肉ルーレットの動き再現
  
  [![Image from Gyazo](https://i.gyazo.com/ff69a9f2b0c0bdc781a984f754a186e1.gif)](https://gyazo.com/ff69a9f2b0c0bdc781a984f754a186e1)


### 今後の計画
- [x] レコード詳細画面で結果を表示したままにする
- おもしろ要素を追加する
  - [x] 割合変化
  - [x] 筋肉ルーレット式
- [ ] タスクアプリへのPOST
